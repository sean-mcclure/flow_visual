<!DOCTYPE html>

<html>
    
<head>
    <script src='https://azlejs.com/v2/azle.min.js'></script>
    <link rel="stylesheet" href="main.css">
</head>
    
<body style='visibility:hidden; overflow-y:scroll'>
    
</body>

</html>
    
<script> 
 
create_azle(function() {

    az.load_scripts([
        "raphael.js",
        "makemap.js"
    ])

    az.call_once_satisfied({
        "condition" : "typeof(raphael) !== 'undefined'",
        "function" : function() {
            raphael({
                center_on_click : false,
            });
            document.body.innerHTML = obj_to_html(parent.az.hold_value.map_data);
            setTimeout(function() {
                document.body.style.visibility = "visible";
                 const config = parent.az.hold_value.config;
            $("a").each(function() {
                $(this)
                    .css("font-size", config.node_font_size)
                    .css("background", config.node_color)
                    .css("color", config.node_font_color)
                    .css("border", config.node_border_thickness + " " + config.node_border_style + " " + config.node_border_color)
                    if(config.node_shadow) {
                        $(this).css("box-shadow", "2px 2px 20px black")
                    }
            })
            $("svg path").attr("stroke", config.line_color);
            $(".node")
                .css("border-radius", config.node_border_radius)
                .css("width", config.node_width)
                .css("height", config.node_height)
            }, 10)
        }
    })
       
})   

window.addEventListener('message', function(e) {
    eval('(' + decodeURI(e.data) + ')();')
}, false)

</script>